<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Precise Extract - Home</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body> 
    <section class="header">
        <nav>
            <a href="{{url_for('home')}}"><img src = "{{url_for('static',filename='img/logo.png')}}"></a>
            <div class="nav-links">
                <ul>
                    <ul>
                        <li><a href="{{url_for('home')}}">Home</a></li>
                        <li><a href="{{url_for('service')}}">Services</a></li>
                        <li><a href="{{url_for('aboutus')}}">About</a></li>
                    </ul>
                </ul>
            </div>
            <div class="nav-log">
                <ul>
                    {%if session !=true %}
                    <li><button onclick="location.href='{{url_for('login')}}'">Log In / Sign Up</button></li>
                    {%else%}
                    <li><button onclick="location.href='{{url_for('main')}}'">main page</button></li>
                    {%endif%}
                </ul>
            </div>
        </nav>
        <div class="textbox">
            <p>DOCUMENT &nbsp; AI &nbsp; PLATFORM</p><br>
            <h1>Precise Extract</h1><br>
            <p1>Extract&nbsp; Tabular&nbsp; data&nbsp; from&nbsp; Documents</p1> <br> 
            <p2>&nbsp;Easily&nbsp;.&nbsp; Efficiently&nbsp;.&nbsp; Accurately</p2>
        </div>   
        <div class="drag-area" id="dragArea">
            <header>Drag & Drop your file here, or browse</header><br><br>
            <button class="Documents-btn" id="uploadButton" >
                <span class="folderContainer">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 146 113"
                    height="113"
                    width="146"
                    class="fileBack"
                  >
                    <path
                      fill="url(#paint0_linear_117_4)"
                      d="M0 4C0 1.79086 1.79086 0 4 0H50.3802C51.8285 0 53.2056 0.627965 54.1553 1.72142L64.3303 13.4371C65.2799 14.5306 66.657 15.1585 68.1053 15.1585H141.509C143.718 15.1585 145.509 16.9494 145.509 19.1585V109C145.509 111.209 143.718 113 141.509 113H3.99999C1.79085 113 0 111.209 0 109V4Z"
                    ></path>
                    <defs>
                      <linearGradient
                        gradientUnits="userSpaceOnUse"
                        y2="95.4804"
                        x2="72.93"
                        y1="0"
                        x1="0"
                        id="paint0_linear_117_4"
                      >
                        <stop stop-color="#000000"></stop>
                        <stop stop-color="#000000" offset="1"></stop>
                      </linearGradient>
                    </defs>
                  </svg>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 88 99"
                    height="99"
                    width="88"
                    class="filePage"
                  >
                    <rect fill="url(#paint0_linear_117_6)" height="99" width="88"></rect>
                    <defs>
                      <linearGradient
                        gradientUnits="userSpaceOnUse"
                        y2="160.5"
                        x2="81"
                        y1="0"
                        x1="0"
                        id="paint0_linear_117_6"
                      >
                        <stop stop-color="white"></stop>
                        <stop stop-color="#686868" offset="1"></stop>
                      </linearGradient>
                    </defs>
                  </svg>
              
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 160 79"
                    height="79"
                    width="160"
                    class="fileFront"
                  >
                    <path
                      fill="url(#paint0_linear_117_5)"
                      d="M0.29306 12.2478C0.133905 9.38186 2.41499 6.97059 5.28537 6.97059H30.419H58.1902C59.5751 6.97059 60.9288 6.55982 62.0802 5.79025L68.977 1.18034C70.1283 0.410771 71.482 0 72.8669 0H77H155.462C157.87 0 159.733 2.1129 159.43 4.50232L150.443 75.5023C150.19 77.5013 148.489 79 146.474 79H7.78403C5.66106 79 3.9079 77.3415 3.79019 75.2218L0.29306 12.2478Z"
                    ></path>
                    <defs>
                      <linearGradient
                        gradientUnits="userSpaceOnUse"
                        y2="82.8317"
                        x2="66.9106"
                        y1="8.71323"
                        x1="38.7619"
                        id="paint0_linear_117_5">
                        <stop stop-color="grey"></stop>
                        <stop stop-color="000000" offset="1"></stop>
                      </linearGradient>
                    </defs>
                  </svg>
                </span>
                <p class="textbrws">Browse File</p>
                <input type="file" accept=".pdf,.jpg,.jpeg,.png" id="fileInput" , oninput="handleinput(this.files)" hidden multiple/> 
              </button>
        </div>        
        <div class="desc">
            <p>Preserve your valuable time and avert any mistakes with Precise Extract's table extraction tool for PDFs/Images.<br> This tool allows for real-time extraction of tables from PDF files and images with absolute precision.</p>
        </div>
    </section>
    <section class="hows">
        <div class="how">
        <h1>How It Works?</h1>
        <div class="hrow">
            <div class="how-col">
                <p>STEP 1</p>
                <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-folder-up"><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/><path d="M12 10v6"/><path d="m9 13 3-3 3 3"/></svg>
                <h3>Upload your file</h3>
                <p1>Imagine you have a bunch of PDFs or images containing structured data, like tables, and you want to extract that data efficiently. With Precise Extract, it's a breeze. You simply log in, upload your files with a few clicks or drag-and-drop, and our system takes care of the rest.</p1>
            </div>
            <div class="how-col">
                <p>STEP 2</p>
                <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-pen-line"><path d="m18 5-3-3H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2"/><path d="M8 18h1"/><path d="M18.4 9.6a2 2 0 1 1 3 3L17 17l-4 1 1-4Z"/></svg>
                <h3>Edit & Review</h3>
                <p1>After uploading your files, you're presented with a preview of the extracted table headers. Here, you have the flexibility to review and edit them if needed. With a simple confirmation click, the edited headers are saved, and your table is ready for the next step.</p1>
            </div>
            <div class="how-col">
                <p>STEP 3</p>
                <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bot-message-square"><path d="M12 6V2H8"/><path d="m8 18-4 4V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z"/><path d="M2 12h2"/><path d="M9 11v2"/><path d="M15 11v2"/><path d="M20 12h2"/></svg>
                <h3>NLP on Database</h3>
                <p1>Now comes the fun part â€“ querying your extracted data without needing to know SQL! Using natural language, you can simply type your query into the provided text box. Our system retrieves the relevant data from the database, and presents it to you in a readable format. </p1>
            </div>
            <div class="how-col">
                <p>STEP 4</p>
                <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-download"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
                <h3>Export your file</h3>
                <p1>Once you've got the insights you need, it's time to take your data elsewhere or share it with colleagues. With Precise Extract, exporting your table is a breeze. With a click of a button, you can export the entire table or filtered data into an Excel file. </p1>
            </div>
        </div>
    </div>
    </section>
    <section class="rev">
        <h1>Customers trust us with their Document processing needs.</h1>
        <div class="revimg">
            <img src="{{url_for('static',filename='img/revimgf.png')}}">
        </div>  
        <div class="slider">
            <div class="item">
                <h1>"Effortless Data Extraction and Querying"</h1><br><br>
                <p>Precise Extract simplifies the daunting task of extracting structured data from documents. Its seamless integration of PaddleOCR and FastAPI ensures swift and accurate extraction, while the intuitive interface allows users to effortlessly upload and manage their data. The natural language query feature powered by Gemini AI is a game-changer.</p><br>
                <p1>Karan Dalal</p1>
            </div>
            <div class="item">
                <h1>"Reliable and Secure Data Handling"</h1><br><br>
                <p>With Precise Extract, data handling becomes a breeze. The robust backend infrastructure, including Flask for user authentication and FastAPI for data processing, ensures reliability and security. The encryption mechanisms, such as JWT tokens and AES encryption, add an extra layer of protection to user data. Whether it's uploading multiple documents or running complex queries, making it a trustworthy solution for data extraction and management."</p><br>
                <p1>Meet Patel</p1>
            </div>
            <div class="item">
                <h1>"Intuitive User Experience, Seamless Integration"</h1><br><br>
                <p>Precise Extract offers a user-friendly experience from start to finish. The well-designed frontend, powered by HTML, CSS, and JavaScript, makes navigation and interaction effortless. The seamless integration between Flask and FastAPI provides a cohesive backend structure, allowing for efficient data extraction and processing. With its intuitive interface and seamless integration, Precise Extract sets a new standard for usability in data extraction tools.</p><br>
                <p1>Heer Mehta</p1>
            </div>
            <div class="item">
                <h1>"Revolutionizing Data Extraction with AI"</h1><br><br>
                <p>Precise Extract leverages cutting-edge AI technologies to revolutionize data extraction. The utilization of PaddleOCR for tabular data extraction and Gemini AI for natural language querying showcases the power of AI in simplifying complex tasks. By combining these technologies with a user-friendly interface and robust backend architecture,  Precise Extract offers a groundbreaking solution for extracting, managing, and querying structured data from documents.</p><br>
                <p1>Siddhesh Masurkar</p1>
            </div>
            <div class="item">
                <h1>"Efficient Data Management, Enhanced Productivity"</h1><br><br>
                <p> "Precise Extract empowers users with efficient data management capabilities, ultimately enhancing productivity. The ability to upload, extract, query, and export data seamlessly streamlines workflows, saving users valuable time and resources. Whether it's extracting data from PDFs or querying tables using natural language, Precise Extract ensures a smooth and efficient data management experience.</p><br>
                <p1>Shravani Golampalle</p1>
            </div>
            <div class="item">
                <h1>"Seamless Collaboration and Scalability"</h1><br><br>
                <p>Precise Extract facilitates seamless collaboration and scalability, making it ideal for teams of all sizes. The shared SQL database ensures that all extracted data is centralized and accessible to authorized users, fostering collaboration and data sharing. Additionally, the scalable architecture of Precise Extract allows it to adapt to growing data needs, ensuring reliable performance even as data volumes increase. With its focus on collaboration and scalability.</p><br>
                <p1>Ananya Armarkar</p1>
            </div>
            <button id="next">></button>
            <button id="prev"><</button>
        </div>
    </section>
    <section class="faqsec">
        <h1>FAQ's</h1>
        <div class="faqm">
        <div class="faq">
            <div class="question">
            <h3>What file formats does Precise Extract support for data extraction?</h3>
            <svg width="15" height="10" viewBox="0 0 42 25">
            <path
            d="M3 3L21 21L39 3"
            stroke="white"
            stroke-width="7"
            stroke-linecap="round"
            />
            </svg>
            </div>
            <div class="answer">    
            <p>Precise Extract supports PDF, JPEG, PNG, and JPG file formats for data extraction.</p>
            </div>
        </div>
            <div class="faq">
                <div class="question">
                <h3>How does Precise Extract ensure data security during the extraction process?</h3>
                <svg width="15" height="10" viewBox="0 0 42 25">
                    <path
                    d="M3 3L21 21L39 3"
                    stroke="white"
                    stroke-width="7"
                    stroke-linecap="round"
                    />
                    </svg>
                </div>
                <div class="answer">    
                <p>Precise Extract employs encryption mechanisms such as JWT tokens and AES encryption to secure data transmission between servers and during storage in the SQL database.</p>
                </div>
                </div>
                <div class="faq">
                    <div class="question">
                    <h3>Can users upload multiple documents with different schemas for extraction simultaneously?</h3>
                    <svg width="15" height="10" viewBox="0 0 42 25">
                        <path
                        d="M3 3L21 21L39 3"
                        stroke="white"
                        stroke-width="7"
                        stroke-linecap="round"
                        />
                        </svg>
                    </div>
                    <div class="answer">    
                    <p>No, users must ensure that all documents uploaded for extraction have the same schema to maintain data integrity and accuracy.</p>
                    </div>
                    </div>
                    <div class="faq">
                        <div class="question">
                        <h3>What methods does Precise Extract employ for accurate tabular data extraction from documents?</h3>
                        <svg width="15" height="10" viewBox="0 0 42 25">
                            <path
                            d="M3 3L21 21L39 3"
                            stroke="white"
                            stroke-width="7"
                            stroke-linecap="round"
                            />
                            </svg>
                        </div>
                        <div class="answer">    
                        <p>Precise Extract utilizes PaddleOCR, an advanced deep learning model, to accurately extract tabular data from documents.</p>
                        </div>
                        </div>
                        <div class="faq">
                            <div class="question">
                            <h3>How does Precise Extract support users in refining extracted data for accuracy and relevance?</h3>
                            <svg width="15" height="10" viewBox="0 0 42 25">
                                <path
                                d="M3 3L21 21L39 3"
                                stroke="white"
                                stroke-width="7"
                                stroke-linecap="round"
                                />
                                </svg>
                            </div>
                            <div class="answer">    
                            <p>Precise Extract empowers users with an intuitive interface that allows them to review and edit extracted data headers before confirmation, ensuring accuracy and relevance tailored to their specific needs.</p>
                            </div>
                            </div>
                        </div>
    </section>
    <section class="foote">
        <div class="footimg">
            <img src="{{url_for('static',filename='img/fot2.png')}}">
        </div> 
        <footer>
            <div class="foot-container">
                <div class="footer-content">
                    <h3>Contact Us</h3>
                    <p>Email:&nbsp;helpdesk@gmail.com</p>
                    <p> Phone:&nbsp;+91 907 674 4732</p>
                    <p> Toll Free:&nbsp;+121 56556</p>
                </div>
                <div class="footer-content">
                    <h3>Quick Links</h3>
                     <ul class="list">
                        <li><a href="{{url_for('home')}}">Home</a></li>
                        <li><a href="{{url_for('aboutus')}}">About</a></li>
                        <li><a href="{{url_for('service')}}">Service</a></li>
                        <li><a href="{{url_for('login')}}">Login</a></li>
                     </ul>
                </div>
                <div class="footer-content">
                    <h3>Follow Us</h3>
                    <div class="tooltip-container">
                        <span class="tooltip"><a href="https://github.com/TirthKothari/PreciseExtract">Git Hub</a></span>
                        <span class="text">
                            <div class="borde-back">
                                <div class="icon">
                                    <a href="">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github">
                                            <path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/>
                                            <path d="M9 18c-4.51 2-5-2-7-2"/>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </span>
                    </div>
                      <div class="tooltip-container">
                        <span class="tooltip"><a href="">Instagram</a></span>
                        <span class="text">
                            <div class="borde-back">
                                <div class="icon">
                                    <a href="">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-instagram">
                                            <rect width="20" height="20" x="2" y="2" rx="5" ry="5"/>
                                            <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
                                            <line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </span>
                    </div>
                    <div class="tooltip-container">
                        <span class="tooltip"><a href="">Facebook</a></span>
                        <span class="text">
                            <div class="borde-back">
                                <div class="icon">
                                    <a href="">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-facebook">
                                            <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </span>
                    </div>
                    
                    </div>
            </div>
            <div class="bottom-bar">
                <p>&copy; 2024 company . All rights reserved</p>
            </div>
        </footer>
    </section>
    <div id="popup">
        <div class="loader">
            <div>
              <ul>
                <li>
                  <svg fill="currentColor" viewBox="0 0 90 120">
                    <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                  </svg>
                </li>
                <li>
                  <svg fill="currentColor" viewBox="0 0 90 120">
                    <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                  </svg>
                </li>
                <li>
                  <svg fill="currentColor" viewBox="0 0 90 120">
                    <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                  </svg>
                </li>
                <li>
                  <svg fill="currentColor" viewBox="0 0 90 120">
                    <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                  </svg>
                </li>
                <li>
                  <svg fill="currentColor" viewBox="0 0 90 120">
                    <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                  </svg>
                </li>
                <li>
                  <svg fill="currentColor" viewBox="0 0 90 120">
                    <path d="M90,0 L90,120 L11,120 C4.92486775,120 0,115.075132 0,109 L0,11 C0,4.92486775 4.92486775,0 11,0 L90,0 Z M71.5,81 L18.5,81 C17.1192881,81 16,82.1192881 16,83.5 C16,84.8254834 17.0315359,85.9100387 18.3356243,85.9946823 L18.5,86 L71.5,86 C72.8807119,86 74,84.8807119 74,83.5 C74,82.1745166 72.9684641,81.0899613 71.6643757,81.0053177 L71.5,81 Z M71.5,57 L18.5,57 C17.1192881,57 16,58.1192881 16,59.5 C16,60.8254834 17.0315359,61.9100387 18.3356243,61.9946823 L18.5,62 L71.5,62 C72.8807119,62 74,60.8807119 74,59.5 C74,58.1192881 72.8807119,57 71.5,57 Z M71.5,33 L18.5,33 C17.1192881,33 16,34.1192881 16,35.5 C16,36.8254834 17.0315359,37.9100387 18.3356243,37.9946823 L18.5,38 L71.5,38 C72.8807119,38 74,36.8807119 74,35.5 C74,34.1192881 72.8807119,33 71.5,33 Z"></path>
                  </svg>
                </li>
              </ul>
            </div><span>Processing...</span></div>
    </div>
    <div id="overlay"></div>
    </div>
    <script src="{{ url_for('static', filename='script1.js') }}"></script>
    <script>
       const dragArea = document.getElementById('dragArea');
    const fileInput = document.getElementById('fileInput');
    const popup = document.getElementById('popup');
    const overlay = document.getElementById('overlay');
        let session = JSON.parse("{{session | tojson}}")
        document.getElementById('uploadButton').addEventListener('click', function() {
            if (session != true){
                
                location.href="{{url_for('login')}}"
            }
            else {
                
                fileInput.click()
            }
            
            
        });
    
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dragArea.addEventListener(eventName, preventDefaults, false);
        });
    
        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }
    
        dragArea.addEventListener('drop', handleDrop, false);
    
        function handleDrop(e) {
            if (session != true){
                
                location.href="{{url_for('login')}}"
            }
            
            const dt = e.dataTransfer;
            const files = dt.files;
            console.log(typeof files)
            console.log(files.length)
            
            handleinput(files)
            // window.location.replace("{{url_for('main')}}")
            // handleFiles(files);
        }
    
        // function handleFiles(files) {
        //     if (files.length > 0) {
        //         showPopup();
        //         brwsheader.classList.add('blur');
        //         updateProgress(files.length, files.length);
        //     }
        // } 
        
    function ValidateInput(files) {
        let approved_ext = ["jpg",'jpeg','png','pdf'];
        let inp_files = new FormData() ;
        if (files.length > 0){
           
            Object.keys(files).forEach(key => {
                let filename = files[key].name
                ext = filename.split(".").pop()
                if (approved_ext.includes(ext.toLowerCase())){
                    inp_files.append('files',files[key])
                }
                else{
                    console.log(`invalid ${filename}`)          //-------------------show---------------
                }

            
            });
            // console.log(inp_files)
            // console.log(inp_files.getAll('files').length)
        }
        else{
            popup.style.display = 'none';
            overlay.style.display = 'none';
            document.body.style.overflow = 'visible';
            console.log("No files selected")                //--------------------------show-------------
            return "No files selected"
        }
        if(inp_files.getAll("files").length==0){
            popup.style.display = 'none';
            overlay.style.display = 'none';
            document.body.style.overflow = 'visible';
            console.log("Upload Valid Files .")
            return "Upload Valid Files ."                //---------------show---------------
        }
        return inp_files
    }

    function handleinput(files){
        popup.style.display = 'block';
        overlay.style.display = 'block';
        document.body.style.overflow = 'hidden';
        // showPopup();
        // brwsheader.classList.add('blur');
        // let inp_files = new FormData()
        ip = "http://192.168.211.93:8000"
        tablename = "trial"
        let url = ip+"/upload_files/"+tablename
        let inp_files=ValidateInput(files)
        if (typeof inp_files != 'object'){
            popup.style.display = 'none';
            overlay.style.display = 'none';
            document.body.style.overflow = 'visible';
            return null
        }
        console.log(typeof inp_files)
        

        fetch("{{url_for('get_token')}}")
        .then(data=>
            data.json()
        )
        .then(token =>{
            const _token = token['token']
            let request = new Request(url,{
            mode:"cors",
            body : inp_files,
            method:"POST",
            headers : new Headers({
                "Authorization" : "Bearer "+_token,
                // "Access-Control-Allow-Origin":"http://127.0.0.1:8000",
                // "Access-Control-Allow-Credentials":'true'

        })});
        fetch(request)
         .then((response)=>
            response.json())
         .then((responsejson)=>{
            if (responsejson['redirect'] == true){
                location.href = "{{url_for('main')}}"
            }
            else{
                console.log(responsejson)        //-------------------show---------------------

            }
            
            
            
         })
         .catch(console.warn)             //----------------------show-----------------
        });
        // let request = new Request(url,{
        //     mode:"cors",
        //     body : inp_files,
        //     method:"POST",
        //     headers : new Headers({
        //         "Authorization" : "Bearer "+_token,
        //     }),
        // });
        // fetch(request)
        //  .then((response)=>
        //     response.json())
        //  .then((responsejson)=>{

        //     console.log(responsejson)
        //  })
        //  .catch(console.warn)
    }
    
    function showPopup() {
            popup.style.display = 'block';
            window.addEventListener('click', handleOutsideClick);
        }
    
    function hidePopup() {
            popup.style.display = 'none';
            brwsheader.classList.remove('blur');
            window.removeEventListener('click', handleOutsideClick);
        }

        
    

    </script>
</body>
</html>