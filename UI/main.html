<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Precise Extract - Edit & Review</title>
<link rel="stylesheet" href="style.css">
<link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
    <div class="sidebar close">
        <div class="logo-box">
            <img src="logoslide.png" class="logo-image"> 
            <div class="logo-name">Precise Extract
        </div>     
    </div>  
        <ul class="sidebar-list">
            <li class="extracli">
                <div class="extrac">
                    <a href="#" class="link">
                        <i class='bx bx-table'></i>
                        <span class="extname">Extraction</span>
                    </a>       
                    <div class="toolty">
                        <span class="tooltipi">Add Group</span>
                        <i class='bx bx-folder-plus bx-flip-horizontal' style='color:#b9b5b5' id="agIcon"></i>        
                    </div>    
                    <div class="tooltyd">
                    <span class="tooltipid">Delete All Groups</span>             
                    <i class='bx bx-folder-minus bx-flip-horizontal' style='color:#b9b5b5' id="deletegIcon" ></i>          
                    </div>
                </div>
            </li>
            <li class="accountli">
                <div class="titleacc">
                    <a href="#" class="link">
                        <i class='bx bx-user' ></i>
                        <span class="accname" id="accname">Account</span>
                    </a>
                </div>
            </li>
            <li class="exportli">
                <div class="exptitle">
                    <a href="#" class="link">
                        <i class='bx bx-spreadsheet' style='color:#b9b5b5' ></i>
                        <button type="button" class="buttonexpo">
                            <span class="button__text">Export</span>
                            <span class="button__icon"><svg class="svg" data-name="Layer 2" id="bdd05811-e15d-428c-bb53-8661459f9307" viewBox="0 0 35 35" xmlns="http://www.w3.org/2000/svg"><path d="M17.5,22.131a1.249,1.249,0,0,1-1.25-1.25V2.187a1.25,1.25,0,0,1,2.5,0V20.881A1.25,1.25,0,0,1,17.5,22.131Z"></path><path d="M17.5,22.693a3.189,3.189,0,0,1-2.262-.936L8.487,15.006a1.249,1.249,0,0,1,1.767-1.767l6.751,6.751a.7.7,0,0,0,.99,0l6.751-6.751a1.25,1.25,0,0,1,1.768,1.767l-6.752,6.751A3.191,3.191,0,0,1,17.5,22.693Z"></path><path d="M31.436,34.063H3.564A3.318,3.318,0,0,1,.25,30.749V22.011a1.25,1.25,0,0,1,2.5,0v8.738a.815.815,0,0,0,.814.814H31.436a.815.815,0,0,0,.814-.814V22.011a1.25,1.25,0,1,1,2.5,0v8.738A3.318,3.318,0,0,1,31.436,34.063Z"></path></svg></span>
                          </button>
                    </a>
                </div>
            </li>
            </ul>
    </div>
    <section class="home">
        <div class="toggle-sidebar"> 
            <!-- <i class='bx bx-menu' style='color:#b9b5b5'></i> -->
        </div>
        <iframe id="table-iframe" width="100%" height="500px"></iframe>
        <div class="scontainer">
            <div class="search-container">
            <textarea class="searchinput" id="queryinput" rows="1" placeholder="Type here..."></textarea>
                <svg class="search__icon" height="24" width="24" fill="#FFFFFF" viewBox="0 0 24 24" data-name="Layer 1" id="Layer_1" class="sparkle">
                <path d="M10,21.236,6.755,14.745.264,11.5,6.755,8.255,10,1.764l3.245,6.491L19.736,11.5l-6.491,3.245ZM18,21l1.5,3L21,21l3-1.5L21,18l-1.5-3L18,18l-3,1.5ZM19.333,4.667,20.5,7l1.167-2.333L24,3.5,21.667,2.333,20.5,0,19.333,2.333,17,3.5Z"></path>
                </svg>
            </div>
            </div>
    </section>
    <div class="delpopup" id="dpop">
        <div class="delcard">
            <div class="card-cont">
                <p class="card-heading">Delete Group?</p>
                <p class="card-desc">Are you sure you want to delete this group?</p>
            </div>
            <div class="card-butn">
                <button class="card-button secondary" id="cancelButton">Cancel</button>
                <button class="card-button primary" id="deleteButton">Delete</button>
            </div>
        </div>
    </div>
      <div class="delgpopup" id="dgpop">
        <div class="delgcard">
            <div class="gcard-cont">
              <p class="gcard-heading">Delete All Groups?</p>
              <p class="gcard-desc">Are you sure you want to delete all groups</p>
            </div>
            <div class="gcard-butn">
                <button class="gcard-button gsecondary" id="gcancelButton">Cancel</button>
                <button class="gcard-button gprimary" id="gdeleteButton">Delete</button>
            </div>
          </div>
      </div>
      <div class="addgpopup" id="agpop">
        <div class="agcard">
            <div class="agcard-cont">
                <p class="agcard-heading">Add a group</p>   
                <input required="" placeholder="Name" type="text" class="nameinput" id="groupNameInput">
                <input type="file" id="popupFileInput" multiple accept=".pdf,.jpg,.jpeg,.png" style="display: none;">
            </div>
            <div class="agcard-butn">
                <button class="agcard-button agsecondary" id="agcancelButton">Cancel</button>
                <button class="agcard-button agprimary" id="agaddButton" disabled>Add</button>
            </div>
        </div>
    </div>
      <div class="accpopup" id="accpop">
        <div class="nmcard">
            <div class="accbackg"></div>
            <div class="profimg" id="profile-image">
                <img src="profile.png" id="profile-pic">
                <input type="file" id="profile-input" style="display: none;" accept=".jpg, .jpeg, .png">
            </div>  
            <input class="emailshow" name="email" placeholder="" type="email">     
            <button class="logoutbtn">
                Log out
              </button>              
        </div>
      </div>
    <script>
    // This is the js for Toggle Icon To Open and CLose Sidebar  
    document.addEventListener("DOMContentLoaded", function() {
    const listItems = document.querySelectorAll(".sidebar-list li");
    listItems.forEach((item) => {
        item.addEventListener("click", () => {
            let isActive = item.classList.contains("active");
            listItems.forEach((el) => {
                el.classList.remove("active");
            });
            if (isActive) item.classList.remove("active");
            else item.classList.add("active");
        });
    });
    const toggleSidebar = document.querySelector(".toggle-sidebar");
    const logo = document.querySelector(".logo-box");
    const sidebar = document.querySelector(".sidebar");
    toggleSidebar.addEventListener("click", () => {
        sidebar.classList.toggle("close"); 
    });
    logo.addEventListener("click", () => {
        sidebar.classList.toggle("close");
    });




    // This is the js for Account Section 
    document.getElementById('accname').addEventListener('click', function(event) {
        event.stopPropagation(); 
        document.getElementById('accpop').style.display = 'block';
    });
    document.body.addEventListener('click', function(event) {
        var accpop = document.getElementById('accpop');
        var accname = document.getElementById('accname');
        var target = event.target;
        if (target !== accpop && !accpop.contains(target) && target !== accname) {
            accpop.style.display = 'none';
        }
    });
    const profileImage = document.getElementById('profile-image');
    const profilePic = document.getElementById('profile-pic');
    const fileInput = document.getElementById('profile-input');
    profilePic.addEventListener('click', function() {
        fileInput.click(); 
    });
    fileInput.addEventListener('change', function() {
        const file = this.files[0];
        if (file) {
            if (/\.(jpe?g|png)$/i.test(file.name)) {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = function() {
                    profilePic.src = reader.result;
                };
            } else {
                alert('Please select a valid image file (JPEG, JPG, or PNG).');
                this.value = ''; 
            }
        }
    });

    
    
    
    //This is the js for add group 
    const agIcon = document.getElementById('agIcon');
        const agPopup = document.getElementById('agpop');
        const agCancelButton = document.getElementById('agcancelButton');
        const agAddButton = document.getElementById('agaddButton');
        const popupFileInput = document.getElementById('popupFileInput');
        const groupNameInput = document.getElementById('groupNameInput');
        agIcon.addEventListener('click', () => {
            agPopup.style.display = 'block';
        });
        agCancelButton.addEventListener('click', () => {
            agPopup.style.display = 'none';
        });
        groupNameInput.addEventListener('input', () => {
            agAddButton.disabled = groupNameInput.value.trim().length === 0;
        });
        agAddButton.addEventListener('click', () => {
            if (!agAddButton.disabled) {
                popupFileInput.click();
            }
        });
        popupFileInput.addEventListener('change', () => {
            const files = popupFileInput.files;
            for (let i = 0; i < files.length; i++) {
                console.log(files[i].name); 
            }
            agPopup.style.display = 'none';
        });

    


        //This is the js for json to html 
        const jsonData = {
        "result": {
            "Foods": ["cake_recipe.pdf", "lasagna_recipe.pdf"],
            "Photo": ["vacation_photo.jpg", "family_picture.jpeg"]
            },
        "message": true
        };
        function createGroupListItem(groupName, files) {
        const listItem = document.createElement('li');
        listItem.innerHTML = `
            <div class="icon-link">
            <a href="#" class="link">
            <i class='bx bx-folder' style='color:#b9b5b5'></i>
            <span class="link-name">${groupName}</span> 
            </a>
            <i class='bx bx-chevron-right chevron-icon'></i>
            <div class="tooltydel">
            <span class="tooltipidel">Delete Group</span> 
            <i class='bx bxs-trash delete-icon'></i>         
            </div>
            </div>
            <ul class="sub-menu">
        ${files.map(file => `<li><p>${file}</p></li>`).join('')}
            </ul>`;
        return listItem;
        }

        function createGroupsInSidebar(data) {
        const sidebarList = document.querySelector('.sidebar-list');
        const fixedListItems = document.querySelectorAll('.extracli, .accountli, .exportli');
        sidebarList.innerHTML = '';
        fixedListItems.forEach(item => sidebarList.appendChild(item));
            for (const groupName in data.result) {
            if (data.result.hasOwnProperty(groupName)) {
            const groupFiles = data.result[groupName];
            const groupListItem = createGroupListItem(groupName, groupFiles);
            sidebarList.insertBefore(groupListItem, fixedListItems[0].nextSibling);
                }
            }
        }
        createGroupsInSidebar(jsonData);




        //This is the js for Dropdown Submenu
        const sidebarList = document.querySelector('.sidebar-list');
        sidebarList.addEventListener('click', function(event) {
        const chevronIcon = event.target.closest('.chevron-icon');
            if (chevronIcon) {
            const parentLi = chevronIcon.closest('li');
            parentLi.classList.toggle('show');
            }
        });



        //This is the js for Delete Specific Group
        function showDeletePopup(event) {
        const deletePopup = document.getElementById('dpop');
        const groupName = event.target.closest('.icon-link').querySelector('.link-name').textContent;
        deletePopup.dataset.groupName = groupName; 
        deletePopup.style.display = 'block';
            }
        const deleteIcons = document.querySelectorAll('.delete-icon');
        deleteIcons.forEach(icon => {
        icon.addEventListener('click', showDeletePopup);
        });
        function closeDeletePopup() {
        const deletePopup = document.getElementById('dpop');
        deletePopup.style.display = 'none';
        }
        const cancelButton = document.getElementById('cancelButton');
        cancelButton.addEventListener('click', closeDeletePopup);
        function handleDelete() {
        const deletePopup = document.getElementById('dpop');
        const groupName = deletePopup.dataset.groupName; 
        console.log(groupName);
        closeDeletePopup();
        }
        const deleteButton = document.getElementById('deleteButton');
        deleteButton.addEventListener('click', handleDelete);




        //This is the js for Showing the table 
        const data = [
    ["apple", "banana", "orange", "grape", "strawberry"],
    ["car", "bicycle", "train", "bus", "plane"],
    ["dog", "cat", "rabbit", "hamster", "goldfish"],
    ["book", "pen", "pencil", "notebook", "marker"],
    ["chair", "table", "desk", "couch", "lamp"],
    ["apple", "banana", "orange", "grape", "strawberry"],
    ["car", "bicycle", "train", "bus", "plane"],
    ["dog", "cat", "rabbit", "hamster", "goldfish"],
    ["book", "pen", "pencil", "notebook", "marker"],
    ["chair", "table", "desk", "couch", "lamp"],
    ["apple", "banana", "orange", "grape", "strawberry"],
    ["car", "bicycle", "train", "bus", "plane"],
    ["dog", "cat", "rabbit", "hamster", "goldfish"],
    ["book", "pen", "pencil", "notebook", "marker"],
    ["chair", "table", "desk", "couch", "lamp"],
    ["apple", "banana", "orange", "grape", "strawberry"],
    ["car", "bicycle", "train", "bus", "plane"],
    ["dog", "cat", "rabbit", "hamster", "goldfish"],
    ["book", "pen", "pencil", "notebook", "marker"],
    ["chair", "table", "desk", "couch", "lamp"]
];

        function generateTableHTML(data) {
        let tableHTML = '<table>';
        data.forEach(rowData => {
        tableHTML += '<tr>';
        rowData.forEach(cellData => {
            tableHTML += `<td>${cellData}</td>`;
        });
        tableHTML += '</tr>';
        });
        tableHTML += '</table>';
        return tableHTML;
        }
        function displayTableInIframe(data) {
        const iframe = document.getElementById('table-iframe');
        const tableHTML = generateTableHTML(data);
        const iframeDocument = iframe.contentDocument || iframe.contentWindow.document;
        iframeDocument.open();
        iframeDocument.write('<!DOCTYPE html><html><head><style>');
        iframeDocument.write(`
        table {
            background-color: #222222;
            margin-left: 360px;
            color: #ffffff;
            font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
            font-size: 15px;
            width: 70%;
            border-collapse: collapse;
        }
        th, td {
            padding: 8px;
            border: 1px solid #4c41ec;
            text-align: left;
            line-height: 0.7;
        }
        th {
            background-color: #f2f2f2;
        }
        tr:nth-child(even) {
            background-color: #000000;
        }
        `);
        iframeDocument.write('</style></head><body>');
        iframeDocument.write(tableHTML);
        iframeDocument.write('</body></html>');
        iframeDocument.close();
        }

        displayTableInIframe(data);




        //This is the js for textbox
        document.addEventListener('DOMContentLoaded', (event) => {
        const textarea = document.getElementById('queryinput');
        textarea.addEventListener('input', function() {
        this.style.height = 'auto'; 
        this.style.height = this.scrollHeight + 'px'; 

        if (this.scrollHeight > parseInt(getComputedStyle(this).maxHeight)) {
            this.style.overflowY = 'scroll';
        } else {
            this.style.overflowY = 'hidden';
        }
    });
});



});
    </script>
</body>
</html>